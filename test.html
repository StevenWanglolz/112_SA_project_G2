<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>測試用</title>

    <link href="statics/css/bootstrap.min.css" rel="stylesheet">
    <link href="statics/icons/font/bootstrap-icons.min.css" rel="stylesheet">
    <script src="statics/js/bootstrap.min.js"></script>
    <script src="statics/js/hugo.js"></script>
    <script src="statics/js/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
</head>
<body>

    <form class="m-5" onsubmit="upload()" enctype="multipart/form-data">
        <div class="mb-3">
            <label class="form-label">圖片上傳測試</label>
            <input class="form-control" type="file" id="img_file">
        </div>
        <div>
            <button class="btn btn-outline-dark" type="submit">上傳</button>
        </div>
    </form>

    <script>
        document.querySelector('form').addEventListener('submit', upload);

        function upload() {
            event.preventDefault();
            var form = document.getElementById('img_file');
            var formData = new FormData(form);

            $.ajax({
                type: "POST",
                url: "api/upload.do",
                data: formData,
                crossDomain: true,
                cache: false,
                timeout: 5000,
                success: function (response) {
                    if(response.status == 200){
                        alert('上傳成功');
                    }
                },
                error: function () {
                    alert("無法連線到伺服器！");
                }
            });

        }
    </script>
    
</body>
</html>